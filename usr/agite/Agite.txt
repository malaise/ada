Agite user guide
================
V14.24

General purpose
---------------
Agite (Ada GIT Editor) is a graphical front end of the 'Git' configuration
management tool.
It proposes a view directory-oriented of the files and history.

The major functions are the navigation in directories, history, file status, 
graphical diff, commit, push, pull and stash.

anchor:XCommandLine[]

Command line
------------
  Usage: agite [ -n | --no_history ] [ <path> | -p | --previous ]

By default Agite continuously stores the current directory in its
xref:XConfig[configuration file].
This allows restarting Agite, in the same directory as when it was stopped, by
providing the argument '-p' or '--previous' at start-up.

On the other hand this feature is not compatible with several instances of
Agite running in parallel. Only one instance of the program shall save the
current directory, which is achieved by providing the argument '-n' or
'--no_history' to all the other instances.

Instead of the previous directory, the start-up directory can be explicitly
specified in the command line with '<path>'. If no path nor '--previous' is
specified, then by default Agite starts in the current directory.

Environment variables
---------------------
AFPX_DATA_DIR::
Agite is based on Afpx screen manager, which reads the configuration files
AFPX.DSC, AFPX.FLD and AFPX.INI. Either theses files are in the current
directory from which Agite is launched, or the environment variable
'AFPX_DATA_DIR' must be set to the directory containing these files. +
Note: Agite unsets AFPX_DATA_DIR at start-up so its children don't inherit
from this setting.

AGITE_CONF_FILE::
Agite allows several settings to be defined in a 
xref:XConfig[configuration file]. By default this file is 
'$\{HOME}/.agite/agite.xml' but this can be overridden by setting the
environment variable 'AGITE_CONF_FILE' to the full path and name of the
configuration file. +
Note: At least the variable 'HOME' or 'AGITE_CONF_FILE' must be set in the
environment, otherwise Agite won't start.

GIT_DIR::
Agite needs to know the root directory of the current Git worktree (if any). It
finds it by locating, in the current directory or above, the Git technical
directory.
By default it is named '.git' but this can be overridden by setting the
environment variable 'GIT_DIR' to the name (without path) of the Git directory.

anchor:XConfig[] 

Configuration file
------------------
User defined configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~
Agite reads at start-up some user-defined configuration parameters:

anchor:XConfXterm[]

xterm::
This defines the command to be launched when the
xref:XXterm[XTerm] button is selected. Example: 'gnome-terminal --zoom=0.9'

anchor:XConfEditor[]

editor::
This defines the command to be launched for editing a file (for example
with the xref:XEdit[Edit] button). A space and the file name will be
concatenated to this string.
+
Note: This command shall start a GUI editor like 'gedit' or a 'xterm -e vi'.
+
Note: The editor should not return until completion, so that Agite
properly refreshes the status of files when the editor exits.

viewer::
This defines the command to be launched for viewing a file (for example
with the xref:XView[View] button). As the xref:XConfEditor[editor] it must be a
GUI, for example 'xterm -e cat' or 'xterm -e vi -M'.

anchor:XConfDiff[]

differator::
This defines the command to be launched for performing a xref:XDiff[Diff]
between two versions of a file. Agite will launch 'git difftool -y -x
<differator> HEAD \-- <file>' for the diff between current file and the Git
repository and 'git difftool -y -x <differator> <ref_rev> <comp_rev> \-- <file>'
for the diff between two revisions of a file.

anchor:XConfMake[]

make::
This defines the command to be launched for the local compilation with the
xref:XMake[Make] button. It shall launch a GUI. +
Example: '#xterm -e 'sh -c "make; echo -n Done.; read a"'#'

anchor:XConfPeriod[]

period::
Agite refreshes the current status of files in the xref:XDir[directory] menu
when it starts the xref:XEdit[editor] and when the editor exits.
This is because the edition can modify the current status of local files. Still,
it also is possible from a stand-alone program to modify the status of
local files. This is why Agite periodically checks and redisplays the status of
local files in in the xref:XDir[directory] and in the xref:XCommit[commit]
menus. This parameter defines the period in seconds of this automatic check.
+
Setting the value to 0.0 disables the feature.
+
Note: A manual refresh is always possible with the xref:XReread[Reread] button.

Agite persistent data
~~~~~~~~~~~~~~~~~~~~~
Agite also uses the configuration file to store information from one invocation
to another.

last_dir::
Agite continuously stores the current directory in this entry. See the 
xref:XCommandLine[argument] '-p' ('--previous') for how to use this feature
and the argument '-n' ('--no_history') for how to disable this feature.

bookmarks::
Agite stores the xref:XBook[bookmarks] in this section:

* blank lines have no 'Name' nor content,
* separators have a 'Name' and no content,
* bookmarks have a content and possibly a 'Name'.

NOTE: The DTD file 'agite.dtd' must be located according to the ''DOCTYPE''
directive of the Agite XML configuration file.

NOTE: In case of problem, a backup of the configuration file may be found at
the same location and name as the configuration file, with the suffix ".tmp".

Agite screens
-------------
Agite is based on the following main menus:

* xref:XDir[Directory]: This is the first menu at start-up. It shows the content
of a directory.
* xref:XBranches[Branches]: This menu allows managing local branches.
* xref:XBook[Bookmarks]: This menu allows bookmarking directories and quickly
jumping to a bookmark.
* xref:XHist[History]: This shows the Git history of a file or directory, the
list of commits that have modified the file(s).
* xref:XDetails[Details]: This shows information on a commit, including the list
of files modified by the commit.
* xref:XStash[Stash]: This menu allows stashing the local worktree and managing
the stack of stashes.
* xref:XCommit[Commit]: This menu shows all the local modifications of the
worktree and allows staging and commiting them.
* xref:XPush[Push]: This menu allows pushing local commits to a remote
repository.
* xref:XPull[Pull]: This menu allows fetching or pulling a branch from a
remote repository.

anchor:XNavigation[]
The navigation is as follows:


                           +----------+
                       /-> | Branches |
                      /    +----------+
                     /     +-----------+
                    /----->| Bookmarks |
                   /       +-----------+
                  /        +---------+       +---------+
                 /-------->| History |<----->| Details |
                /          +---------+       +---------+
  +---------- +/           +-------+
  | Directory |----------->| Stash |
  +---------- +\           +-------+
                \          +--------+       +------+
                 \-------->| Commit |------>| Push |
                  \        +--------+       +------+
                   \       +------+
                    \----->| Pull |
                           +------+

There are also a confirmation screen and an error screen that are called when
necessary.

NOTE: All the screen transitions are based on the 'call-return' scheme. +
So please note the double arrow between 'History' and 'Details': from the
'History' of a file (or dir) you can select a commit and see its 'Details'.
In this new screen you can select a file and see its 'History'... and so on.
Once this is done you need to "un-stack" all these menus (by clicking on
the 'Back' button in each) in order to go back to the 'Directory' menu. +
Also please note that sometimes a successuful action in a menu leads to
automatically go back to the ancestor of this menu, sometimes directly back to
the Directory menu.

Directory
~~~~~~~~~
anchor:XDir[]
The 'Directory' menu lists the content, subdirectories and files, of
the current directory. Starting from top, the areas and fields are:

.Environment
Title::
The first line shows in the middle the name and current version of Agite.

Branch::
On the left is the indication of the current Git branch. Cliking on the branch
name launches the xref:XBranches[branches] menu.

Host::
On the right is the indication of current host (which normally is also
indicated in title of the X window of Agite).

.Directories
Root::
This line shows the root directory of the current Git worktree. Clicking in this
field changes the current directory to the root.

anchor:XGo[]

Go::
This line shows the current directory. It also allows entering a path and then
going to it by hitting the key 'Return' or clicking in the 'Go' button. This
text field can scroll horizontally to accomodate to long paths.

anchor:XReread[]

Reread::
Normally Agite re-scans the current directory and refreshes the list and status
when necessary, and also periodically if the feature is enabled (see
xref:XConfPeriod[period] configuration option). This button explicitly refreshes
the current list and status of files.

Dir Up::
This button allows moving up to parent directory.

Bookmarks::
This button activates the xref:XBook[bookmarks] menu.

PushD and PopD::
The 'PushD' button allows storing the current directory and the
'PopD' button then allows moving back to it.
+
* [underline]#How it works#: Agite keeps a cache of two paths, D1 and D2.
'PushD' saves D1 as D2 and pushes the current directory as D1,
while 'PopD' swaps D1 and D2 and moves to the new D1 (if D2 is empty then 'PopD'
makes a 'PushD' first). Note that 'PopD' is disabled as long as it would lead
to move to the current directory (i.e. when D2 is the current directory, or
D2 ie empty and D1 is the current directory).
+
* [underline]#How to use it#: At start-up current the directory is automatically
pushed and 'PopD' is disabled. As soon as you move to another directory, 'PopD'
allows moving back to the original one. Once two directories have been pushed, 
clicking on 'PopD' allows swapping between the new pushed and the previously
pushed directories (in fact, 'PopD' does not pop).
+
* [underline]#Warning#: Keep in mind that only the first directory (where Agite
starts) and the current directory from which you do a first 'PopD' (because
at this time D2 is empty) are automatically pushed. Changing to a new directory
doesn't make it automatically pushed. Popping doesn't lead to push
the current directory either. For example, if you 'PushD' the directory
A, then change to B (and do not explicitly push it), then change to C, then
'PopD', then Agite will change to directory A (not B).
+
* [underline]#Warning#: Keep in mind that 'PopD' swaps D1 and D2 before going
to D1.  For example, if you start in directory A, then change to B, then push it,
then change to C, then 'PopD', Agite will change to directory A (not B). A
second 'PopD', will change to B.

.List

anchor:XQuickSearch[]

Quick search::
On top of the list is a quick search area on two rows.
Clicking in any character of this area triggers a search of the first file
starting with this character. If found, the file becomes selected in the list
and at the top of the list area. Otherwise the selection is unchanged. +
A tick box button allows searching for the directory (starting with the
character that will be clicked) instead of a file. You need to tick the box
first, then click on a character.

The list itself::
The list shows the directories then the files of the
xref:XGo[current directory], in alphabetical order.
+
Each directory starts with three spaces then the name then a \'/'.
+
Each file is preceded by two characters of its Git status, index and local (see
'man git-status') then a space, then the name. Git status can be:

* ' ' = unmodified
* M = modified
* A = added
* D = deleted
* R = renamed
* C = copied
* U = updated but unmerged

+
After the name, a character represents the kind of entry:

* ' ' fo a file, 
* '@' for a symbolic link, 
* '/' for a directory,
* '?' for other or unknown kind (of a deleted entry).

+
Only one entry is selected at a time (in green).
+
A single click selects an entry for xref:XEdit[edition], 
xref:XDiff[difference] from the Git reference, xref:XHistory[history],
xref:XAdd[add] or xref:XRevert[revert] operation.
+
A double click on a directory changes the current directory to it. +
A double click on a file launches the xref:XEdit[editor] on it. +
A double click on a symbolic link makes one or the other (or nothing),
depending on the target of the link.

anchor:XNavig[]

Navigation in the list::

The simplest way to navigate in the list is to use the wheel of the mouse.
Combine it with 'Shift' for scrolling one page and with 'Ctrl' for scrolling
ten pages.
+
Another way is to use the navigation buttons 'Top', 'PgUp', 'Up',
'Down', 'PgDown' and 'Bottom'. The 'Center' button scrolls the list so that the
selected entry is as most as possible in the middle of the list area.
+
Another way is to use the keyboard: Up and Down arrows, Page Up, Page Down,
Ctrl + Page Up (for Top) and Ctrl + Page Down (for Bottom).
+
All the lists of Agite screens have the same means for navigation.

NOTE: Keep in mind that the xref:XQuickSearch[quick search] is also a good way to
quickly find a file or directory.

.Actions on the current selection in the list
anchor:XEdit[]

Edit::
This button launches the editor (defined in the xref:XConfEditor[editor] entry
of the configuration file) on the file currently selected in the list, as a
double click on this file would do. +
It has no effect if the current entry is a directory.

anchor:XDiff[]

Diff::
*On a file*, this button launches the graphical difference tool (defined in
the xref:XConfDiff[differator] entry of the configuration file) to show the
current modifications (if any) of the selected file. It shows the differences
between the currently modified file and the version in Git HEAD. +
On a un-modified file it shows the last update of the file (the difference
introduced by the last commit involving the file).
+
*On a directory* (including './' but excluding '../'), this button launches the
difference on all the modified files of the selected directory and
of its sub-directories. +
It has no effect if the selected directory is the parent directory entry ('../')
or if there is no modified file under the selected directory.

anchor:XHistory[]

History::
This button activates the xref:XHist[history] menu that shows the history of
the current file or directory.

anchor:XAdd[]

Add::
Adds to Git the current directory (its content in fact), the current file or
symbolic link.

anchor:XRevert[]

Revert::
This button reverts the local change on the current entry. +
First, a simple screen asks to confirm or cancel the operation. +
Then, depending on the type of the current entry:

- If it is \'./' then, after confirmation, Agite performs a 'git reset
--hard', which resets the local changes in the *whole worktree* (root and
subtree), not only the current directory.
- If it is a directory then it is deleted, which succeeds only if the
directory is empty.
- If it is a file or a symbolic link,
 * if unknown by Git, then it is removed,
 * if just added to Git, then it becomes unknown by Git,
 * if just deleted from Git, then it is restored to its last committed content
 * if known by Git and modified, then it is restored to its last committed
content,
 * if known by Git and deleted, then it is restored to its last committed
content
 * if known by Git and renamed, then the original file is restored to its last
committed content and the new one is reset as unknown by Git
 * if up to date in Git, then it is removed from Git

+
Note: The Revert button has no effect on a file known by Git and not modified.

.Other actions

anchor:XXterm[]

XTerm::
This button starts a X terminal by launching the command defined
in the xref:XConfXterm[xterm] entry of the configuration file.

anchor:XMake[]

Make::
This button makes a local compilation by launching the command defined
in the xref:XConfMake[make] entry of the configuration file.

Stash::
This button activates the xref:XStash[stash] screen that allows managing the
the list of stashes.

Commit::
This button activates the xref:XCommit[commit] screen that allows
commiting the the local modifications.

Pull::
This button activates the xref:XPull[pull] screen that allows fetching or 
pulling a branch from a remote repository;

Exit::
A button makes Agite exit.

Branches
~~~~~~~~
anchor:XBranches[]
This menu works on the global worktree, not on the local directory. +
It allows adding, modifying, checking out a branch or merging a branch into
current. +

.Current branch and root

This shows the current branch and path of the root of current worktree.

.Actions

The possible actions on the list of local branches:

Create::

Enter a name in the text field and click in the 'Create' button or hit Return
to create a new branch.

Rename::

Enter a new name in the text field and click in the 'Rename' button to rename
the branch selected in the list.

Delete::

Click in the 'Delete' button to delete, after confirmation, the branch selected
in the list.

Checkout::

Click in the 'Checkout' button to checkout, after confirmation, the branch
selected in the list.

Merge::

anchor:XMerge[]
Click in the 'Merge' button to merge into current, after confirmation, the
branch selected in the list.

.Back

This button returns to the xref:XDir[directory] menu.

Bookmarks
~~~~~~~~~
anchor:XBook[]
Locations (directories) can be bookmarked. To bookmark a directory, first move
to it in the xref:XDir[directory] menu, then go in the 'bookmark' menu, then
click in the button xref:XAddCurr[AddCur]. This adds the current directory in the list.
Click in xref:XBookBack[Back] to go back to the xref:XDir[directory] menu.
Later on you can open the bookmark menu and double click on the entry, or
select it and click on xref:XGoto[Goto], in order to go back to this directory.

Bookmarks are saved in the xref:XConfig[configuration file] so that they 
are persistent from one session to another.

The bookmark menu shows the current directory and lists the known bookmarks.
This list can contain four kinds of entry:

* Anonymous bookmarks don't have name. They contain only the path to a
directory. Example:

 /home/user/ada

* Named bookmarks are created like anonymous ones but with a name set in the
'Name to add' field when clicking in xref:XAddCurr[AddCur]. The name appears in
parentheses before the path of the bookmark. Example:

 (Reposit) /home/user/ada/reposit

* Separators are created by setting a name (in 'Name to add') and clicking
in xref:XAddSep[AddSep]. This creates a line with dashes and the name. Example:

 ----- Ada -----

* Blank lines can also be used to separate bookmarks. They are anonymous 
separators, created by clicking in xref:XAddSep[AddSep] with no name set.

anchor:XAddCurr[]
anchor:XAddSep[]
The buttons 'AddCur' and 'AddSep' insert a named or anonymous entry (depending
on the field 'Name to add') below the current entry.

anchor:XGoto[]
The 'Goto' button allows changing current dir to the bookmark currently
selected and switches back to the xref:XDir[directory] menu.
Double clicking on the entry has the same effect. It has no effect on a
separator.

Bookmarks and separators can be organised with the buttons 'MovUp', 'MovDwn' and
can be deleted with the button 'Del', after confirmation when deleting a
bookmark.

Navigation in the list is the same as the xref:XNavig[navigation] in the
directory menu, with the mouse wheel, the keyboard and buttons.

anchor:XBookBack[]
The button 'Back' returns to the xref:XDir[directory] menu without
changing the current directory.

History
~~~~~~~
anchor:XHist[]
This menu shows the relative path of the selected file and lists the history of
all the commits on current branch that have affected this file. +
The newest release (Head) is on top.

In case of a directory the menu shows the relative path of the directory
and lists the history of the commits of all the files in the directory
and in its sub-directories.

This lists follows the renaming of files and directories.

.List
The list shows for each entry the date of the commit (format YYMMDD:HHMM),
a space then the comment (up to two lines, separated by '$') of the commit.

Navigation in the list is the same as the xref:XNavig[navigation] in the
directory menu, with the mouse wheel, the keyboard and buttons.

The list can be very long, so there are several extra features on the history
list:

* The position of the current page, in term of percentage of the history, is
displayed above the list,

* The indexes of the left and right selection are also displayed above the list,

* A hyphen ('-') on the left side of the list indicates the position
of the current page, as a scroll bar would do,

* You can click at a given row in this "scroll bar". The list will move
at the page corresponding to where you *release* the mouse button (and the
hyphen will be set to this position).

anchor:XView[]

.View
Double click on an entry (a commit) or select an entry and click on the 'View'
button to view the version of the file that was committed.

When the current history is on a directory this feature is de-activated.
Still it is possible to list and view one by one the files of a commit with the
xref:XDetails[details] menu.

anchor:XDiff1[]

.Diff
The 'Diff' button shows the differences between commits. When the history is on
a directory it applies to all the files of the directory and sub-directories
that were affected by the commit(s).

'Diff' can compare two arbitrary commits or show the changes of one commit:

* Diff between two commits. 
** Left click on an entry of the list. It becomes green and the 'LeftSel'
above  the list shows the index of this entry from the Head.
** Right click on an entry of the list. It becomes black and the 'RightSel'
above the list shows the index of this entry from the Head.
** Click on the 'Diff' button. This starts the xref:XConfDiff[differator] 
with the right (black) selection as reference and the left (green) selection
as the target of the difference. If the history is about a directory several
differators may be started.

* Diff of a commit.
** Ensure that there is no right selection (no entry on black and
'RightSel'= 0).
If there is one then find it and de-select it (by a right click). Alternatively 
you can right-select any entry and de-select it with a second right click on it.
** Left click on an entry of the list. It becomes green and the 'LeftSel'
above the list shows the index of this entry from the Head.
** Click on the 'Diff' button. This starts the xref:XConfDiff[differator]
with the version before the selection as reference and the selection
as the target of the difference. If the history is about a directory several
differators may be started.

anchor:XDetail[]

.Detail
This button activates the xref:XDetails[details] menu on the
commit currently (left-)selected in the history.

anchor:XRestore[]

.Restore
This button causes Agite to check that the current file is not locally
modified. If not, Agite asks for confirmation then restores the file into the
version currently (left-)selected in the history. This function is not active on
the history of a directory.

.Checkout
This button is active only on the history of the root directory. It asks
confirmation then checks out the currently selected commit. Beware that the
current worktree then becomes in 'detached HEAD' state. "You can look around,
make experimental changes and commit them, and you can discard any commits you
make in this state without impacting any branches by performing another
checkout" (another commit earlier in the same branch or the HEAD of another
branch).

.Back
This button returns to the xref:XDir[directory] menu.

NOTE: The history follows the renaming of the file or directory but the
reference name (that is displayed above the history list) is used for the
xref:XView[view] and xref:XDiff1[diff] operations.
As a consequence, Agite will fail to show a file, or a difference from a file,
if the entry in the history is before a renaming. Still, it is possible to view
a file that has been committed, then renamed later on, with the following
operations: +
* Select the commit in the history +
* Show the xref:XDetail[details] of this commit +
* Select the file in the xref:XDetails[details] of the commit (previous name) +
* Click on xref:XView[View] the file.

It is not possible to do a xref:XDiff1[diff] between two versions of a file if
the file has been renamed or moved between the versions.

Details
~~~~~~~
anchor:XDetails[]
The 'Details' menu shows the details of a commit:

* The SHA-1 hash of the commit, that you can copy into the clipboard,
* The date and comment (up to seven lines) of the commit, that you can
also alternatively copy into the clipboard,
* The list of all the files in the commit, each preceded by a letter:
** M Modified,
** A Added,
** D Deleted.

A specific entry '/' is added on top of the list, which represents the root of
the current worktree.

For all other entries (files) of the list:

* double click on the entry or select the entry and click on 'View' allows 
viewing the file as it was committed,
* clicking on 'Hist' allows viewing the full history of the file,
* clicking on 'Diff' allows viewing the differences between the version before
and in the commit.
* clicking on 'Restore' allows restoring the file from the commit. As in the
xref:XRestore[restore] from the history, there is first a check that the file is
not locally modified, then a confirmation.

When the "/" entry is selected you can:

* click on the button 'History' to get the full history of the worktree,
* click on the button 'Diff' to launch the differator on each file of
the commit (differences brought by the commit),
* click on the button 'Restore' to restore all the files of the commit,
if none of them is locally modified, and after a confirmation.

NOTE: Clicking on 'Hist' leads to call a new function that show the history, as
explained in the section on xref:XNavigation[navigation].

Stash
~~~~~
anchor:XStash[]
This menu works on the global worktree, not on the local directory. +
The screen shows the list of stashes. Each entry has a stash number,
the branch on which the stash was done and the text of the message.

.Current branch and root

This shows the current branch and path of the root of current worktree.

.Actions

The possible actions on the list of stashes are:

Add::

Enter a message (or name) for the stash and click in the 'Add' button or press
the Return key. Agit stashes the current worktree (which performs a 'git reset
--hard'), then applies this stash, then returns to the xref:XDir[directory]
menu. +
The new stash has been inserted in the list. +

NOTE: You can un-apply this stash ('git reset --hard') by selecting the entry
'/' of the xref:XDir[directory] list and cliking on the xref:XRevert[revert]
button.


Apply::

Applies the stash currently selected in the list and returns to the
xref:XDir[directory] menu.

Pop::

After confirmation, applies the stash currently selected in the list, removes
it from the list and returns to the xref:XDir[directory] menu.

Del::

After confirmation, deletes (drops) the stash currently selected in the list.

.Back

This button returns to the xref:XDir[directory] menu.

Commit
~~~~~~
anchor:XCommit[]
This menu works on the global worktree, not on the local directory. +
It shows the list of all the local changes, allows (un)staging them and allows
entering a comment for the commit:

.Current branch and root

This shows the current branch and path of the root of current worktree.

.Sign

Append the user name and email address to the comment.

.Clear

Clear the comment fields.

.Copy
Copy the text of the Comment in the X11 selection buffer (for paste using
the middle mouse button). Note that this X11 selection buffer is different from
the clipboard of the window manager.

NOTE: The clipboard of the window manager, (which can be accessed in some
applications by Ctrl-C, Ctrl-V and the right mouse button opening a pop-up
menu), is not available in Agite, neither for copy nor for paste.

.Comment

You can enter up to 7 lines of comment. +
You can paste the content of the X11 selection buffer into a line of the
comment, by middle-clicking on this line.

NOTE: Comment must not be empty when committing.

.List of changes

This list shows all the current changes in the worktree, with 3 letters of
status for each file:

* The first column ('S') shows the summary of the status:
 - a '''+''' if all the changes of the file are staged,
 - a '''*''' if some changes are staged and some others are not,
 - empty if no changes are staged (e.g. locally modified or new).
* The second column ('I') shows the changes in the index (that will be
committed),
* The third column ('L') shows the changes local to the worktree (that will not
be committed).

You can select a file and show its local differences, stage or unstage its
changes.

.Actions

The possible actions on the list of changes or the comment are:

Double click::

A double click on a change toggles the stage status of the entry:
 - if all the modifications of the file are staged (S='''+''') then unstage
these changes,
 - otherwise stage all the changes.

Reread::

Normally Agite re-scans the current directory and refreshes the list and status
when necessary, and also periodically if the feature is enabled (see
xref:XConfPeriod[period] configuration option). This button explicitly refreshes
the current list and status of changes.

Stage::

Stage (add/rm) the current file (selected in list) or change, and move to next.

Unstage::

Unstage (reset) the current file (selected in list) or change and move to next.

StageAll::

Stage all the changes that are unstaged. Also proposes to add the untracked
(new) files.

NOTE: The Stage, Unstage and StageAll buttons are active only if there are local
changes.

Diff::

Show the difference between the current change and the HEAD for the current file
(selected in list).

.Commit

Commit the staged changes.

NOTE: Ensure to enter a comment before committing.

If the commit succeeds then the list of changes is updated, otherwise
the error is reported through a specific screen.

NOTE: The Commit button is active only if there are staged changes.

.Push

This button activates the xref:XPush[push] menu.

.Back

This button returns to the xref:XDir[directory] menu.

Push
~~~~
anchor:XPush[]
The 'Push' menu allows pushing the local changes to a given remote
repository. +
It shows:

.Current branch and root

This shows the current branch and path of the root of the current workspace.

.List of references

This lists the known remote references, from which you can select the target. +
If the remote ''orign'' is defined then it is selected by default.

.Push

Pushes the local commits to the selected remote repository. +
If there is no error then agite returns back to the xref:XDir[directory] menu,
otherwise the error is reported through a specific screen.

.Back

Moves back to the xref:XCommit[commit] menu without pushing.

anchor:XSelBranch[]

Pull
~~~~
anchor:XPull[]
The 'Pull' menu allows pulling the current branch (fetching and merging) or
fetching only another branch from a remote repository. +
This is achieved through two successive screens.

Branch selection
^^^^^^^^^^^^^^^^
anchor:XSelBranch[]
This screen allows selecting the branch to pull. +
It shows:

.Current branch and root

This shows the current branch and path of the root of the current workspace.

.List of remote branches

This lists the known remote branches, from which you can select the branch to
fetch. +
The current branch is selected by default and will be pulled. If you select
another branch it will only be fetched and you will have to xref:XMerge[merge]
it explicitly if you want.

.OK

Validates the branch selection and activates the 
xref:XSelReference[reference selection] for selecting the remote reference and
pulling from it.

.Back

Moves back to the xref:XDir[directory] menu without pulling.

Reference selection
^^^^^^^^^^^^^^^^^^^
anchor:XSelReference[]
This screen allows selecting the remote repository from which to pull. +
It shows:

.Current branch and root

This shows the current branch and path of the root of the current workspace.

.Selected branch to pull

Below the title is displayed the branch (previously selected) that will be
pulled.

.List of references

This lists the known references from which you can select the one to pull the
branch from. +
If the remote ''orign'' is defined then it is selected by default.

.Pull or Fetch

This button shows 'Pull' if the selected remote branch is the same as current
branch, otherwise it shows 'Fetch'. It pulls or fetches the remote branch from
the selected remote repository. +
If there is no error then agite returns back to the xref:XDir[directory] menu,
otherwise the error is reported through a specific screen.

.Back

Moves back to the xref:XSelBranch[branch selection] menu without pulling.

Interfaces with Git
-------------------
This section lists the commands and arguments passed to Git. This requires git
version 1.7.0 or above:

* A function gets Git version by calling 'git --version',

* A function lists local files by calling 'git ls-files' and
'git status \-- porcelain .',

* A function lists all changes by calling 'git status \-- porcelain .',

* A function lists the status of a file by calling 'git status \-- porcelain
<file>',

* A function lists the commits on local dir by calling
'git log --follow --date=iso --topo-order \-- <pwd>',

* A functions gets the hash of the last commit by calling 'git log
--pretty=format:"%H" -n -1 -- <pwd>'

* A function gets the details of a commit by calling
'git log --name-status --date=iso -n 1 <HSA1_hash>',

* A function lists the remote repositories by calling 'git remote',

* A function extracts a given version of a file (in a commit by calling
'git show <HSA1_hash>:<file> > <file>',

* A function launches the differator on a modified file (versus Head) by
calling 'git difftool -y -x <differator> HEAD \-- <file>',

* A function lauches the differator between two versions of a file (or dir) by
calling 'git difftool -y -x <differator> <ref_HSA1> <comp_HSA1> \-- <file>',

* A function reverts the local changes of a file by calling
'git checkout HEAD \-- <file>',

* A function globally checks out a given commit or branch by calling
'git checkout <ref>',

* A function resets the staged sgtatus of a file by calling 'git reset \--
<file>',

* A function stages a change of a file by calling 'git add \-- <file>',

* A function removes a file from the index by 'git rm \-- <file>',

* A function commits the local changes by calling 'git commit -m
"<comment>"',

* A function pushes the local commits by calling 'git push <remote>',

* A function fetches or pulls the current branch by calling 'git fetch
* <remote> <branch>:<branch>' or 'git pull * <remote> <branch>:<branch>',

* A function gets the user name and email by calling 'git config user.name'
and 'git config user.email',

* A function gets the name of current branch by calling 'git branch',

* A function gets the list of stashes by calling 'git stash list',

* A function saves the current stash by calling 'git stash save -q <message>',

* Three functions apply/pop/drop a stash by calling 'git stash apply/pop/drop
-q stash@{<num>}',

* A function lists the local branches by calling 'git branch ' or lists the
remote branches by calling 'git fetch' then 'git branch -r',

* Three functions create/rename/delete a branch by calling 'git branch
[ -m | -d ] <name> [<new_name>]',

* A function merges a branch into current by calling 'git merge <branch>'.

