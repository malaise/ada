<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Asubst</title>
  <meta content="MALAISE Pascal" name="author">
</head>
<body>
<div style="text-align: center; font-family: monospace;"><big><big><big><big><big
 style="font-weight: bold;">Asubst</big><br>
<small style="font-weight: bold;">V2_9</small></big></big></big></big><br>
</div>
<pre style="font-family: monospace;"><br><br></pre>
<h1 style="font-family: monospace;">1. General syntax</h1>
<span style="font-family: monospace;">Usage: asubst [ { &lt;option&gt;
} ] &lt;find_pattern&gt; &lt;replace_pattern&gt; [ { &lt;file&gt; } ]</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">or&nbsp;&nbsp; : asubst -h |
--help | -v | --version</span><br style="font-family: monospace;">
<span style="font-family: monospace;">Substitutes strings in files.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">If no file name is specified,
substitutes from stdin to stdout.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">See "man 7 regex" for basic and
extended regex and for ignorecase pattern matching.</span><br
 style="font-family: monospace;">
<h1 style="font-family: monospace;">2. Options</h1>
<span style="font-family: monospace;">-b or --basic : use 'basic' regex
instead of the default 'extended' regex.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-i or --ignorecase : do case
insensitive match checking of &lt;find_pattern&gt;.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-s or --save : make a copy
(&lt;file&gt;.asu) of original file(s).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-q or --quiet : for no printout.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-n or --number : print number of
substitutions per file.</span><br style="font-family: monospace;">
<span style="font-family: monospace;">-v or --verbose : print each
substitution and its line number.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-f or --file : indicate that
&lt;file&gt; will contain names of files to process.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-m &lt;max&gt; or
--max=&lt;max&gt; : stop processing each file after &lt;max&gt;
substitutions, (0 for infinite).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">-- : to stop the list of options.
If &lt;find_pattern&gt; is "-b", then use <br>
asubst [ { &lt;option&gt; } ] -- "-b" &lt;replace_pattern&gt; [ {
&lt;file&gt; } ].</span><br>
<h1 style="font-family: monospace;">3. Find pattern</h1>
<span style="font-family: monospace;">&lt;find_pattern&gt; ::= { [
&lt;regex&gt; ] \n } [ &lt;regex&gt; ]</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">If there is no "\n", then the
regex can be any regular expression. If it does not start with '^' nor
ends with '$', then it is applied several times to each input line
(each time to the text following previous substitution).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">Examples:</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">echo "toto" | asubst "t"
"x"&nbsp;&nbsp; -&gt; "xoxo"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">echo "toto" | asubst "t"
"ti"&nbsp; -&gt; "tiotio"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">echo "tito" | asubst "t." "tu"
-&gt; "tutu"</span><br style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">If there are "\n", they delimit
several regex that will apply to several lines.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">In this case, '^' and '$' are
forbidden around a "\n" (they will automatically be added).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">Search pattern is split into
several regex and \n patterns, each line of input is split in two
input items: text then newline, pattern 1 is compared to item 1, if
they match, pattern 2 is compared to item 2.</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">Examples:</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; r</span><br style="font-family: monospace;">
<span style="font-family: monospace;">^r$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; ^r$</span><br style="font-family: monospace;">
<span style="font-family: monospace;">r1\nr2\n -&gt; r1$ \n and ^r2$</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">r1\nr2&nbsp;&nbsp; -&gt; r1$ \n
and ^r2</span><br style="font-family: monospace;">
<span style="font-family: monospace;">r1\nr2$&nbsp; -&gt; r1$ \n and
^r2$</span><br style="font-family: monospace;">
<span style="font-family: monospace;">r1$\n is forbdiden.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">The difference between "r1\n" and
"r1$" is that "r1\n" is two regex. With "r1\n", the string matching
"r1" AND the following New_Line will be substituted. With "r1$", only
the string matching "r1" will be subtituted.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">The following specific '\'
sequences are also handled:</span><br style="font-family: monospace;">
<span style="font-family: monospace;">- "\t, replaced by a (horiz) tab,</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">- "\xIJ" where IJ is an
hexadecimal number (00 to FF or ff) for a byte code.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">Beware that \xIJ is replaced
before compilind the regex, so it cannot be used to avoid a given
character. "[a\x2Dx]" is exactly the same as "[a-x]", and "\x0A" is
exactly the same as "\n" (it will be used as regex delimiter).<br>
Also notice that some regex expressions are supposed to match a "new
line" (example </span><span style="font-family: monospace;">[:blank:</span><span
 style="font-family: monospace;">] in a bracket expression) but will
not match in asubst, because the input flow/file is decomposed into
lines then each line is compared to the regex expressions.</span>
<h1 style="font-family: monospace;">4. Replace string<br>
</h1>
<span style="font-family: monospace;">The following '\' sequences are
supported:</span><br style="font-family: monospace;">
<span style="font-family: monospace;">- \n will be replaced by a
newline.</span><br style="font-family: monospace;">
<span style="font-family: monospace;">- \t will be replaced by a
(horiz) tab.</span><br style="font-family: monospace;">
<span style="font-family: monospace;">- \xIJ where IJ is an hexadecimal
number (00 to FF or ff) will be replaced</span><span
 style="font-family: monospace;"> by a byte with the corresponding
value.</span><br style="font-family: monospace;">
<span style="font-family: monospace;">- \RIJ where IJ is an hexadecimal
number will be replaced by the string </span><span
 style="font-family: monospace;">matching the regex number IJ, 00 for
the complete string,</span><br style="font-family: monospace;">
<span style="font-family: monospace;"> (in case of a single regex (no
"\n") \R00 is equivalent to \R01).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">- \rIJ where IJ is an hexadecimal
number will be replaced by the string</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> matching the substring J of the
regex number I, J=0 for the complete string,</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> (so \R0x = \rx0).</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">- \u, \l, \m for starting an
UPPER, lower or Mixed case conversion. A</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> conversion ends when a new
starts, at end of line or on \c.</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">- \c for stopping a case
conversion.<br>
Case conversion applies after (sub)string replacement.<br>
</span><br style="font-family: monospace;">
<span style="font-family: monospace;">Examples:</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "toto" | asubst "t"
"\x40"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; "@"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "tito" | asubst "t."
"&gt;\R00&lt;"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; "&gt;ti&lt;&gt;to&lt;"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "toto\ntiti\ntata\n" |
asubst ".*\n" "\R01" -&gt; "tototititata"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "\ntoto\ntiti\ntata" |
asubst "\n.*" "\R02" -&gt; "tototititata"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "tito" | asubst
"(.i)(.o)" "\r12&lt;-&gt;\r11"&nbsp;&nbsp;&nbsp; -&gt; "to&lt;-&gt;ti"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "tito" | asubst ".*"
"\m\R01"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; "Tito"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">echo -en "toto" | asubst
"(.)(.)(..)" "\u\r12\c\r11" -&gt; "Otto"</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
</body>
</html>
