<?xml version="1.0"?>
<!DOCTYPE chats SYSTEM "chats.dtd">
<!-- Example of TCP chat script -->

<chats TimeoutMs="10_000">
  <chat Name="httpTopic0.9">GET http://localhost/${HOME}/tmp/Topic_Type.dtd</chat>
  <script>
    <send><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT publishers (publisher)*>

<!ELEMENT publisher (topic)*>
<!ATTLIST publisher Name CDATA #REQUIRED>

<!ELEMENT topic (type)*>
<!ATTLIST topic Name CDATA #REQUIRED>

<!ELEMENT type (key)+>
<!ATTLIST type Name CDATA #REQUIRED>

<!ELEMENT key EMPTY>
<!ATTLIST key Field CDATA "localID">]]></send>
    <close/>
  </script>
  <chat Name="httpTopic1.0">GET http://localhost/${HOME}/tmp/Topic_Type.dtd HTTP/1.0</chat>
  <script>
    <read></read>
    <send>HTTP/1.1 200 OK</send>
    <send>Date: Sat, 28 Aug 2010 07:04:35 GMT</send>
    <send>Server: Apache/ProXad [Aug  9 2008 02:45:09]</send>
    <send>Last-Modified: Mon, 23 Aug 2010 18:00:15 GMT</send>
    <send>ETag: "6f332b-125-4c72b72f"</send>
    <send>Connection: close</send>
    <send>Accept-Ranges: bytes</send>
    <send>Content-Length: 293</send>
    <send>Content-Type: application/xml-dtd</send>
    <send></send>
    <send><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT publishers (publisher)*>

<!ELEMENT publisher (topic)*>
<!ATTLIST publisher Name CDATA #REQUIRED>

<!ELEMENT topic (type)*>
<!ATTLIST topic Name CDATA #REQUIRED>

<!ELEMENT type (key)+>
<!ATTLIST type Name CDATA #REQUIRED>

<!ELEMENT key EMPTY>
<!ATTLIST key Field CDATA "localID">]]></send>
    <close/>
  </script>
  <chat Name="testWaitClose">close</chat>
  <script>
    <wait DelayMs="1000"/>
    <close/>
  </script>
  <chat Name="testPpp"
        InputDefaultTimeoutMs="5_000"
        TimeoutMs="21_000">login</chat>
  <script>
    <send>me</send>
    <read TimeoutMs="10_000">password</read>
    <send>pass</send>
    <read>logged</read>
    <wait DelayMs="2000"/>
    <send>bye</send>
    <read>bye</read>
    <wait DelayMs="500"/>
    <close/>
  </script>
  <chat Name="testMulti"
        InputDefaultTimeoutMs="1_000">testMulti</chat>
    <!-- A chat is like a expect, but with attibutes (Name...) -->
  <script>
    <send></send>
    <select>
      <expect>login</expect>
      <script>
        <send>me</send>
        <select>
          <expect>password</expect>
          <script>
            <send>pass</send>
          </script>
          <expect>PASSWORD</expect>
          <script>
            <send>PASS</send>
          </script>
          <default/>
          <script>
            <close/>
          </script>
        </select>
        <wait DelayMs="10"/>
        <send>ls</send>
      </script>
      <expect>LOGIN</expect>
      <script>
        <send>ME</send>
        <read>PASSWORD</read>
        <send>PASS</send>
      </script>
    </select>
    <wait DelayMs="1000"/>
    <close/>
  </script>
</chats>

